<!DOCTYPE html>
<html>
<head>
    <title>My Exam Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script>
        let regio_id;
        document.addEventListener('DOMContentLoaded', async function () {
            try {
                // Extract the regionaam parameter from the URL
                const urlParams = new URLSearchParams(window.location.search);
                const examid = urlParams.get('examid');

                // Fetch data for the specific regionaam from the API
                const response = await fetch(`https://api.nas64.be/examen/${examid}`);
                const data = await response.json();
                regio_id = data.id;
                const response2 = await fetch(`https://api.nas64.be/inschrijving/${examid}`);
                response2.json().then(data2 => {
                    data2.forEach(element => {
                        const response3 = fetch(`https://api.nas64.be/students/${element.student_id}`);
                        response3.json().then(data3 => {
                            const row = document.createElement('tr');
                            row.innerHTML = `<td>${data3.id}</td><td>${data3.naam}</td><td>${data3.uid}</td><td>${data3.r_nummer}</td>`;
                            document.querySelector('.row').appendChild(row);
                        });
                    });
                });

                // Update the content of the page with the fetched data
                document.getElementById('examTitle').textContent = `Exam ID: ${examid}`;
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        });
        
    </script>
</head>
<body>
<h1 id="examTitle"></h1>

<div class="row">
    <table class="table table-striped mx-auto text-center">
        <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>UID</th>
            <th>R-nummer</th>
        </tr>
        </thead>
        <tbody class="row">

        </tbody>
    </table>
    <p x-data="examid"></p>
</div>

</body>
</html>
